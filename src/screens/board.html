<html>
<body>
    <div class="fixed-left">
        <div id="result-table" class="results">
        </div>

        <div id="player-hud" class="player-hud">
            <div id="drawn-tile" class="drawn-tile"></div>
        </div>
    </div>

    <div id="board" class="board"></div>

	<script type="text/javascript">
		var $results = $('#result-table');

		function drawResultTable() {
			$results.html('');
			var index = 0;
			$(gameController.getPlayers()).each(function() {
				var $row = $("<div/>")
					.addClass("player")
                    .addClass("player-" + index);
				var $name = $("<div/>")
                    .addClass("name")
                    .text((index+1) + ". " + this.name);
				var $points = $("<div/>")
					.addClass("points")
					.text(this.points);
				var $color = $("<div/>")
					.addClass("color")
					.addClass(this.color);

				$row.append($name);
				$row.append($color);
				$row.append($points);
				$results.append($row);
				index++;
			});
		}

		drawResultTable();

        var game = window.gameController;
        var turn;
        var $activeTile;
        var board;

        setTimeout(function () {
		    board = new Board($("#board"));
            turn = game.firstTurn();
            $activeTile = turn.tile.draw();
		    updatePlayerHud();
        }, 500);

        function updatePlayerHud() {
            $('.player.active').removeClass('active');
            $('.player').eq(turn.playerNum).addClass('active');
            $('#drawn-tile').html($activeTile);
            turn.tile.initDrag(function(userTile) {
                board.activateDropZone(userTile);
            }, function () {
                board.deactivateDropZone();
            });
        }

	</script>
</body>
</html>